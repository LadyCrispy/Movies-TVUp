(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(17),o=a.n(i),r=(a(84),a(85),a(23)),s=a(20),c=a(26),m=a(30),u=a(27),h=a(29),d=a(75),v=a.n(d),p=function e(){var t=this;Object(s.a)(this,e),this.getAllMovies=function(){return t.service.get("/movies").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.movieDetails=function(e){return t.service.get("/movies/".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.deleteTheMovie=function(e){return t.service.delete("/movies/".concat(e)).then(function(e){return e.data}).catch(function(e){return alert(e)})},this.editTheMovie=function(e,a){return t.service.put("/movies/".concat(e),a).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.addMovie=function(e){return t.service.post("/movies",e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.service=v.a.create({baseURL:"".concat("https://tvup-movies.herokuapp.com/","api"),withCredentials:!0})},b=a(14),f=a(145),g=a(146),E=function(e){return l.a.createElement(f.a,{bg:"secondary",className:"movie-card"},l.a.createElement(f.a.Img,{variant:"top",src:e.poster_path,alt:e.original_title}),l.a.createElement(f.a.Body,null,l.a.createElement(f.a.Title,null,e.original_title),l.a.createElement(b.b,{className:"card-btn btn btn-md btn-dark",to:"/movies/".concat(e._id)}," Detalles "),l.a.createElement(g.a,{variant:"danger",onClick:function(){return e.delete(e._id)}},"Eliminar")))},_=a(78),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).deleteMovie=function(e){a.service.deleteTheMovie(e).then(function(t){var n=a.state.movies.filter(function(t){return t._id!==e});a.setState({movies:n})})},a.searchMovie=function(e){a.setState({search:e.target.value});var t=a.state.movies.filter(function(t){return t.original_title.toLowerCase().includes(e.target.value.toLowerCase())});a.setState({filteredMovies:t})},a.state={movies:[],search:"",filteredMovies:[],deleted:!1},a.service=new p,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.getAllMovies().then(function(t){return e.setState({movies:t})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement(_.a,{as:"input",onChange:this.searchMovie,type:"text",placeholder:"Buscar pel\xedcula",value:this.state.search,className:"search-movie"}),l.a.createElement("section",{className:"hero"},l.a.createElement("video",{src:"https://res.cloudinary.com/dgesryvti/video/upload/v1565296650/Movies_posters/y2mate.com_-_batman_vs_bane_the_dark_knight_rises_full_fight_1080p_hd_rDuetklFtDQ_1080p_vj40gk.mp4",playsInline:!0,autoPlay:!0,muted:!0,loop:!0},"video"),l.a.createElement("h1",null,"Nuestras pel\xedculas")),l.a.createElement("div",{className:"row movies-list"},this.state.search.length?this.state.filteredMovies.length?this.state.filteredMovies.map(function(t,a){return l.a.createElement(E,Object.assign({},t,{key:a,delete:e.deleteMovie}))}):l.a.createElement("div",{className:"not-film"},l.a.createElement("h1",null,"La pel\xedcula que buscas no existe"),l.a.createElement("img",{src:"https://res.cloudinary.com/dgesryvti/image/upload/v1565341464/Movies_posters/oie_transparent_1_uo2oio.png",alt:"errorimage"}),l.a.createElement("br",null)):this.state.movies.map(function(t,a){return l.a.createElement(E,Object.assign({},t,{key:a,delete:e.deleteMovie}))})))}}]),t}(n.Component),y=a(28),k=a(31),N=a(144),C=a(143),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handlechange=function(e){var t=e.target,n=t.name,l=t.value;a.setState({movie:Object(k.a)({},a.state.movie,Object(y.a)({},n,l))})},a.handleSubmit=function(e){e.preventDefault(),a.service.editTheMovie(a.state.movie._id,a.state.movie).then(function(e){return console.log("done")})},a.handleFileUpload=function(e){a.uploadData=new FormData,a.uploadData.append("poster_path",e.target.files[0]),a.service.handleUpload(a.uploadData).then(function(e){console.log(e),a.setState({movie:Object(k.a)({},a.state.movie,{poster_path:e.secure_url})})}).catch(function(e){return console.log(e)})},a.hideBtn=function(){setTimeout(function(){a.uploadData=0},2e3)},a.state={movie:{}},a.service=new p,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.movieDetails(this.props.match.params.id).then(function(t){return e.setState({movie:t})})}},{key:"render",value:function(){return l.a.createElement("section",null,this.state.movie?l.a.createElement("div",{className:"detail"},l.a.createElement("div",null,l.a.createElement("figure",null,l.a.createElement("img",{src:this.state.movie.poster_path,alt:this.state.movie.original_title})),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{onChange:this.handleFileUpload,type:"file",name:"poster_path",id:"poster_path",placeholder:"Elige imagen"})," ",l.a.createElement("br",null),this.uploadData?l.a.createElement("button",{type:"submit",onClick:this.hideBtn},"Cambiar imagen"):null)),l.a.createElement("aside",null,l.a.createElement("h1",null,this.state.movie.original_title)," ",l.a.createElement("br",null),l.a.createElement("h3",null,"Sinopsis:"),l.a.createElement("p",null,this.state.movie.overview),l.a.createElement("a",{className:"btn btn-sm btn-outline-info detail-links",href:this.state.movie.video,target:"_blank",rel:"noopener noreferrer"},"Video"),l.a.createElement(b.b,{className:"btn btn-sm btn-outline-secondary detail-links",to:"/"},"Volver"),l.a.createElement(N.a,{bsPrefix:"accordion"},l.a.createElement(f.a,{className:"edit-form"},l.a.createElement(f.a.Header,{className:"dark"},l.a.createElement(N.a.Toggle,{as:g.a,variant:"link",eventKey:"0",className:"button-edit top-button-edit save"},"Editar"),l.a.createElement(N.a.Toggle,{as:g.a,variant:"link",eventKey:"0",className:"button-edit save"},"\u2717")),l.a.createElement(N.a.Collapse,{eventKey:"0"},l.a.createElement(C.a,{className:"edit",onSubmit:this.handleSubmit},l.a.createElement(C.a.Group,{htmlFor:"original_title"},l.a.createElement(C.a.Label,null,"T\xedtulo:"),l.a.createElement(C.a.Control,{onChange:this.handlechange,as:"textarea",rows:"2",value:this.state.movie.original_title,name:"original_title",id:"original_title"})),l.a.createElement(C.a.Group,{htmlFor:"overview"},l.a.createElement(C.a.Label,null,"Sinopsis:"),l.a.createElement(C.a.Control,{onChange:this.handlechange,as:"textarea",rows:"4",value:this.state.movie.overview,name:"overview",id:"overview"})),l.a.createElement(C.a.Group,{htmlFor:"video"},l.a.createElement(C.a.Label,null,"URL del v\xeddeo:"),l.a.createElement(C.a.Control,{onChange:this.handlechange,as:"textarea",rows:"2",value:this.state.movie.video,name:"video",id:"video"})),l.a.createElement(N.a.Toggle,{className:"btn btn-sm btn-outline-info detail-links save",as:g.a,type:"submit",variant:"link",eventKey:"0"},"Guardar"))))))):l.a.createElement("div",{className:"error"},l.a.createElement("h1",null,"La pel\xedcula que buscas no existe"),l.a.createElement("img",{src:"https://res.cloudinary.com/dgesryvti/image/upload/v1565341464/Movies_posters/oie_transparent_1_uo2oio.png",alt:"errorimage"}),l.a.createElement("br",null),l.a.createElement(b.b,{className:"btn btn-sm btn-dark return",to:"/"},"Volver")))}}]),t}(n.Component),S=a(35),O=a.n(S),M=a(21),D=a(34),x=a.n(D),F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleClose=function(){return e.setState({show:!1})},e.handleShow=function(){return e.setState({show:!0})},e.handlechange=function(t){var a=t.target,n=a.name,l=a.value;e.setState({movie:Object(k.a)({},e.state.movie,Object(y.a)({},n,l))})},e.setRedirect=function(){e.state.movie.original_title.length?setTimeout(function(){e.setState({redirect:!0}),setTimeout(function(){e.handleClose()},300)},1e3):e.handleShow()},e.handleSubmit=function(t){t.preventDefault(),e.service.addMovie(e.state.movie).then(function(t){e.movieId=t._id})},e.handleFileUpload=function(t){e.uploadData=new FormData,e.uploadData.append("poster_path",t.target.files[0]),e.service.handleUpload(e.uploadData).then(function(t){console.log(t),e.setState({movie:Object(k.a)({},e.state.movie,{poster_path:t.secure_url})})}).catch(function(e){return console.log(e)})},e.state={movie:{original_title:"",overview:"",poster_path:"",video:"https://"},show:!1,redirect:!1},e.handleShow=e.handleShow.bind(Object(M.a)(e)),e.handleClose=e.handleClose.bind(Object(M.a)(e)),e.service=new p,e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,this.state.redirect?l.a.createElement(r.a,{to:"/movies/".concat(this.movieId)}):null,l.a.createElement("button",{className:"btn btn-dark add-button ",onClick:this.handleShow},"A\xf1adir pel\xedcula"),l.a.createElement(x.a,{show:this.state.show,onHide:this.handleClose,className:"modal"},l.a.createElement(x.a.Header,{closeButton:!0},l.a.createElement(x.a.Title,null,"Nueva pel\xedcula")),l.a.createElement(x.a.Body,null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"title"},"T\xedtulo"),l.a.createElement("input",{required:!0,onChange:this.handlechange,value:this.state.movie.original_title,type:"text",className:"form-control",id:"original_title",name:"original_title"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),l.a.createElement("input",{onChange:this.handlechange,value:this.state.movie.overview,type:"text",className:"form-control",id:"overview",name:"overview"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"length"},"Enlace al trailer"),l.a.createElement("input",{onChange:this.handlechange,value:this.state.movie.video,type:"text",className:"form-control",id:"video",name:"video"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"poster_path"},"Poster"),l.a.createElement("input",{onChange:this.handleFileUpload,type:"file",className:"form-control",id:"poster_path",name:"poster_path"})),this.state.movie.poster_path.length?l.a.createElement("button",{onClick:this.setRedirect,type:"submit",className:"btn btn-dark"},"A\xf1adir"):null))))}}]),t}(n.Component),T=function(){return l.a.createElement(O.a,{bg:"dark",expand:"xl",fixed:"top"},l.a.createElement(O.a.Brand,null,l.a.createElement(b.b,{to:"/",className:"nav-links title"},"FilmFever")),l.a.createElement(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(O.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(F,null)))};var L=function(){return l.a.createElement("main",null,l.a.createElement(T,null),l.a.createElement(r.d,null,l.a.createElement(r.b,{exact:!0,path:"/",component:w}),l.a.createElement(r.b,{exact:!0,path:"/movies/:id",component:j})))};o.a.render(l.a.createElement(b.a,null,l.a.createElement(L,null)),document.getElementById("root"))},79:function(e,t,a){e.exports=a(141)},84:function(e,t,a){},85:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.057123b8.chunk.js.map