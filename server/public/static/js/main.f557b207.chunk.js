(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(16),o=a.n(l),r=(a(81),a(82),a(22)),s=a(19),c=a(25),m=a(29),u=a(26),h=a(28),d=a(72),v=a.n(d),p=function e(){var t=this;Object(s.a)(this,e),this.getAllMovies=function(){return t.service.get("/movies").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.movieDetails=function(e){return t.service.get("/movies/".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.deleteTheMovie=function(e){return t.service.delete("/movies/".concat(e)).then(function(e){return e.data}).catch(function(e){return alert(e)})},this.editTheMovie=function(e,a){return t.service.put("/movies/".concat(e),a).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.addMovie=function(e){return t.service.post("/movies",e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.service=v.a.create({baseURL:"".concat("https://tvup-movies.herokuapp.com/","api"),withCredentials:!0})},f=a(13),b=a(142),E=a(143),g=function(e){return i.a.createElement(b.a,{bg:"secondary",className:"movie-card"},i.a.createElement(b.a.Img,{variant:"top",src:e.poster_path,alt:e.original_title}),i.a.createElement(b.a.Body,null,i.a.createElement(b.a.Title,null,e.original_title),i.a.createElement(f.b,{className:"btn btn-md btn-dark",to:"/movies/".concat(e._id)}," Ver detalles "),i.a.createElement(E.a,{variant:"danger",onClick:function(){return e.delete(e._id)}},"Eliminar")))},_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).deleteMovie=function(e){a.service.deleteTheMovie(e).then(function(t){var n=a.state.movies.filter(function(t){return t._id!==e});a.setState({movies:n})})},a.searchMovie=function(e){a.setState({search:e.target.value});var t=a.state.movies.filter(function(t){return t.original_title.toLowerCase().includes(e.target.value.toLowerCase())});a.setState({filteredMovies:t})},a.state={movies:[],search:"",filteredMovies:[],deleted:!1},a.service=new p,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.getAllMovies().then(function(t){return e.setState({movies:t})})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"container"},i.a.createElement("input",{onChange:this.searchMovie,type:"text",placeholder:"Buscar pel\xedcula",value:this.state.search,className:"search-movie",id:"search",name:"search"}),i.a.createElement("section",{className:"hero"},i.a.createElement("video",{src:"https://res.cloudinary.com/dgesryvti/video/upload/v1565296650/Movies_posters/y2mate.com_-_batman_vs_bane_the_dark_knight_rises_full_fight_1080p_hd_rDuetklFtDQ_1080p_vj40gk.mp4",playsInline:!0,autoPlay:!0,muted:!0,loop:!0},"video"),i.a.createElement("h1",null,"Nuestras pel\xedculas")),i.a.createElement("div",{className:"row movies-list"},this.state.search.length?this.state.filteredMovies.map(function(t,a){return i.a.createElement(g,Object.assign({},t,{key:a,delete:e.deleteMovie}))}):this.state.movies.map(function(t,a){return i.a.createElement(g,Object.assign({},t,{key:a,delete:e.deleteMovie}))})))}}]),t}(n.Component),w=a(27),k=a(30),y=a(141),N=a(140),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handlechange=function(e){var t=e.target,n=t.name,i=t.value;a.setState({movie:Object(k.a)({},a.state.movie,Object(w.a)({},n,i))})},a.handleSubmit=function(e){e.preventDefault(),a.service.editTheMovie(a.state.movie._id,a.state.movie).then(function(e){return console.log("done")})},a.handleFileUpload=function(e){a.uploadData=new FormData,a.uploadData.append("poster_path",e.target.files[0]),a.service.handleUpload(a.uploadData).then(function(e){console.log(e),a.setState({movie:Object(k.a)({},a.state.movie,{poster_path:e.secure_url})})}).catch(function(e){return console.log(e)})},a.hideBtn=function(){setTimeout(function(){a.uploadData=0},2e3)},a.state={movie:{}},a.service=new p,a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.movieDetails(this.props.match.params.id).then(function(t){return e.setState({movie:t})})}},{key:"render",value:function(){return i.a.createElement("section",null,this.state.movie?i.a.createElement("div",{className:"detail"},i.a.createElement("div",null,i.a.createElement("figure",null,i.a.createElement("img",{src:this.state.movie.poster_path,alt:this.state.movie.original_title})),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("input",{onChange:this.handleFileUpload,type:"file",name:"poster_path",id:"poster_path",placeholder:"Elige imagen"})," ",i.a.createElement("br",null),this.uploadData?i.a.createElement("button",{type:"submit",onClick:this.hideBtn},"Cambiar imagen"):null)),i.a.createElement("aside",null,i.a.createElement("h1",null,this.state.movie.original_title)," ",i.a.createElement("br",null),i.a.createElement("h3",null,"Sinopsis:"),i.a.createElement("p",null,this.state.movie.overview),i.a.createElement("a",{className:"btn btn-sm btn-outline-info detail-links",href:this.state.movie.video,target:"_blank",rel:"noopener noreferrer"},"Video"),i.a.createElement(f.b,{className:"btn btn-sm btn-outline-secondary detail-links",to:"/"},"Volver"),i.a.createElement(y.a,{bsPrefix:"accordion"},i.a.createElement(b.a,{className:"edit-form"},i.a.createElement(b.a.Header,{className:"dark"},i.a.createElement(y.a.Toggle,{as:E.a,variant:"link",eventKey:"0",className:"button-edit top-button-edit save"},"Editar"),i.a.createElement(y.a.Toggle,{as:E.a,variant:"link",eventKey:"0",className:"button-edit save"},"\u2717")),i.a.createElement(y.a.Collapse,{eventKey:"0"},i.a.createElement(N.a,{className:"edit",onSubmit:this.handleSubmit},i.a.createElement(N.a.Group,{htmlFor:"original_title"},i.a.createElement(N.a.Label,null,"T\xedtulo:"),i.a.createElement(N.a.Control,{onChange:this.handlechange,as:"textarea",rows:"2",value:this.state.movie.original_title,name:"original_title",id:"original_title"})),i.a.createElement(N.a.Group,{htmlFor:"overview"},i.a.createElement(N.a.Label,null,"Sinopsis:"),i.a.createElement(N.a.Control,{onChange:this.handlechange,as:"textarea",rows:"4",value:this.state.movie.overview,name:"overview",id:"overview"})),i.a.createElement(N.a.Group,{htmlFor:"video"},i.a.createElement(N.a.Label,null,"URL del v\xeddeo:"),i.a.createElement(N.a.Control,{onChange:this.handlechange,as:"textarea",rows:"2",value:this.state.movie.video,name:"video",id:"video"})),i.a.createElement(y.a.Toggle,{className:"btn btn-sm btn-outline-info detail-links save",as:E.a,type:"submit",variant:"link",eventKey:"0"},"Guardar"))))))):i.a.createElement("div",{className:"error"},i.a.createElement("h1",null,"La pel\xedcula que buscas no existe"),i.a.createElement("img",{src:"https://res.cloudinary.com/dgesryvti/image/upload/v1565341464/Movies_posters/oie_transparent_1_uo2oio.png",alt:"errorimage"}),i.a.createElement("br",null),i.a.createElement(f.b,{className:"btn btn-sm btn-dark return",to:"/"},"Volver")))}}]),t}(n.Component),j=a(34),S=a.n(j),O=a(20),M=a(33),D=a.n(M),F=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleClose=function(){return e.setState({show:!1})},e.handleShow=function(){return e.setState({show:!0})},e.handlechange=function(t){var a=t.target,n=a.name,i=a.value;e.setState({movie:Object(k.a)({},e.state.movie,Object(w.a)({},n,i))})},e.setRedirect=function(){e.state.movie.original_title.length?setTimeout(function(){e.setState({redirect:!0}),setTimeout(function(){e.handleClose()},300)},1e3):e.handleShow()},e.handleSubmit=function(t){t.preventDefault(),e.service.addMovie(e.state.movie).then(function(t){e.movieId=t._id})},e.handleFileUpload=function(t){e.uploadData=new FormData,e.uploadData.append("poster_path",t.target.files[0]),e.service.handleUpload(e.uploadData).then(function(t){console.log(t),e.setState({movie:Object(k.a)({},e.state.movie,{poster_path:t.secure_url})})}).catch(function(e){return console.log(e)})},e.state={movie:{original_title:"",overview:"",poster_path:"",video:"https://"},show:!1,redirect:!1},e.handleShow=e.handleShow.bind(Object(O.a)(e)),e.handleClose=e.handleClose.bind(Object(O.a)(e)),e.service=new p,e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.state.redirect?i.a.createElement(r.a,{to:"/movies/".concat(this.movieId)}):null,i.a.createElement("button",{className:"btn btn-dark add-button ",onClick:this.handleShow},"A\xf1adir pel\xedcula"),i.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose,className:"modal"},i.a.createElement(D.a.Header,{closeButton:!0},i.a.createElement(D.a.Title,null,"Nueva pel\xedcula")),i.a.createElement(D.a.Body,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"title"},"T\xedtulo"),i.a.createElement("input",{required:!0,onChange:this.handlechange,value:this.state.movie.original_title,type:"text",className:"form-control",id:"original_title",name:"original_title"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),i.a.createElement("input",{onChange:this.handlechange,value:this.state.movie.overview,type:"text",className:"form-control",id:"overview",name:"overview"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"length"},"Enlace al trailer"),i.a.createElement("input",{onChange:this.handlechange,value:this.state.movie.video,type:"text",className:"form-control",id:"video",name:"video"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"poster_path"},"Poster"),i.a.createElement("input",{onChange:this.handleFileUpload,type:"file",className:"form-control",id:"poster_path",name:"poster_path"})),this.state.movie.poster_path.length?i.a.createElement("button",{onClick:this.setRedirect,type:"submit",className:"btn btn-dark"},"A\xf1adir"):null))))}}]),t}(n.Component),x=function(){return i.a.createElement(S.a,{bg:"dark",expand:"xl",fixed:"top"},i.a.createElement(S.a.Brand,null,i.a.createElement(f.b,{to:"/",className:"nav-links title"},"FilmFever")),i.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(S.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(F,null)))};var T=function(){return i.a.createElement("main",null,i.a.createElement(x,null),i.a.createElement(r.d,null,i.a.createElement(r.b,{exact:!0,path:"/",component:_}),i.a.createElement(r.b,{exact:!0,path:"/movies/:id",component:C})))};o.a.render(i.a.createElement(f.a,null,i.a.createElement(T,null)),document.getElementById("root"))},76:function(e,t,a){e.exports=a(138)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.f557b207.chunk.js.map